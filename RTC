public with sharing class RelationshipTeamController {
    
    public AccountTeamMember CSO {get; private set;}
    public AccountTeamMember TSO {get; private set;}
    public AccountTeamMember TSA {get; private set;}
    public AccountTeamMember PWA {get; private set;}

    public AccountTeamMember IB {get; private set;}
    public AccountTeamMember IB_M_A {get; private set;}
    public AccountTeamMember IB_Syndications {get; private set;}
    public AccountTeamMember IB_Sponsor_Coverage {get; private set;}
    public AccountTeamMember IB_ABL_Credit {get; private set;}    
    
    public AccountTeamMember IB_ABL {get; private set;}
    public AccountTeamMember IB_Capital_Solutions {get; private set;}
    public AccountTeamMember IB_Coverage {get; private set;}
    public AccountTeamMember IB_EFL {get; private set;}
    public AccountTeamMember IB_ETF {get; private set;}
    public AccountTeamMember IB_Leveraged_Finance {get; private set;}
    
    public AccountTeamMember IB_Operations {get; private set;}
    public AccountTeamMember IB_Public_Finance {get; private set;}
    public AccountTeamMember IB_Sales_Trading {get; private set;}

    public String currentRecordId {get; set;}

    public RelationshipTeamController(ApexPages.StandardController controller) {
        this.currentRecordId = controller.getId();
        initializeEmptyObjects();
        loadTeamMembers();
    }


    private void loadTeamMembers() {
        if (this.currentRecordId == null) return;

        Map<Id, AccountTeamMember> teamMembers = new Map<Id, AccountTeamMember>(
            [SELECT Id, AccountID, User.Name, User.IsActive, TeamMemberRole 
             FROM AccountTeamMember 
             WHERE AccountID = :this.currentRecordId 
             ORDER BY User.Name ASC]
        );

        for (AccountTeamMember atm : teamMembers.values()) {
            if (atm.TeamMemberRole == 'Assigned CSO') {
                CSO = atm;
            } else if (atm.TeamMemberRole == 'Treasury') {
                TSO = atm;
            } else if (atm.TeamMemberRole == 'TS - TSA (Treasury Solutions Associate)') {
                TSA = atm;
            } else if (atm.TeamMemberRole == 'PCA') {
                PWA = atm;
            } else if (atm.TeamMemberRole == 'IB') {
                IB = atm;
            } else if (atm.TeamMemberRole == 'IB - M&A') {
                IB_M_A = atm;
            } else if (atm.TeamMemberRole == 'IB - Syndications') {
                IB_Syndications = atm;
            } else if (atm.TeamMemberRole == 'IB - Sponsorship') {
                IB_Sponsor_Coverage = atm;
            } else if (atm.TeamMemberRole == 'IB - ABL Credit') {
                IB_ABL_Credit = atm;
            }else if ( atm.TeamMemberRole == 'IB - ABL'){ IB_ABL = atm;}
                else if ( atm.TeamMemberRole == 'IB - Capital Solutions'){ IB_Capital_Solutions = atm;}
                else if ( atm.TeamMemberRole == 'IB - Coverage'){ IB_Coverage = atm;}
                else if ( atm.TeamMemberRole == 'IB - EFL'){ IB_EFL = atm;}
                else if ( atm.TeamMemberRole == 'IB - ETF'){ IB_ETF = atm;}
                else if ( atm.TeamMemberRole == 'IB - Leveraged Finance'){ IB_Leveraged_Finance = atm;}
                else if ( atm.TeamMemberRole == 'IB - Operations'){ IB_Operations = atm;}
                else if ( atm.TeamMemberRole == 'IB - Public Finance'){ IB_Public_Finance = atm;}
                else if ( atm.TeamMemberRole == 'IB - Sales & Trading'){ IB_Sales_Trading = atm;}
        }

    }
    
    private void initializeEmptyObjects() {
        CSO = new AccountTeamMember(User = new User());
        TSO = new AccountTeamMember(User = new User());
        TSA = new AccountTeamMember(User = new User());
        PWA = new AccountTeamMember(User = new User());
        
        IB = new AccountTeamMember(User = new User());
        IB_ABL = new AccountTeamMember(User = new User());
        IB_ABL_Credit = new AccountTeamMember(User = new User());
        IB_Capital_Solutions = new AccountTeamMember(User = new User());
        IB_Coverage = new AccountTeamMember(User = new User());
        IB_EFL = new AccountTeamMember(User = new User());
        IB_ETF = new AccountTeamMember(User = new User());
        IB_Leveraged_Finance = new AccountTeamMember(User = new User());
        IB_M_A = new AccountTeamMember(User = new User());
        IB_Operations = new AccountTeamMember(User = new User());
        IB_Public_Finance = new AccountTeamMember(User = new User());
        IB_Sales_Trading = new AccountTeamMember(User = new User());
        IB_Sponsor_Coverage = new AccountTeamMember(User = new User());
        IB_Syndications = new AccountTeamMember(User = new User());
    }
}
